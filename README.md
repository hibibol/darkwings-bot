# darkwings-bot
Princess Connect Re:Dive クラン DarkWings及びプレシャスメモリー用のクランバトル凸管理用Bot

クラン内共有用のレポジトリ．(意味あるか分からないけど)

ほぼ使い捨てコード，そのうち廃止する予定

# セットアップ

書くのめんどくさいので保留，需要があれば書くかも

# 出来る事

- 凸予約
- 凸前宣言
- 周回数及びボスの体力管理
- 残凸管理
- タスキル管理
- 持ち越し状況の把握
- 凸ルートを探す(おまけ)
- テロ(おまけ)
- 現在開催中のイベント情報(おまけ)

# 使い方(基本)

凸管理用のメッセージを表示するチャンネルとコマンドを打つチャンネルを分けて運用する．
正しくコマンドを入力出来ればbotからOKサインのリアクションが帰ってくるので，リアクションを確認しながら使用する．

クランバトルの開始時に`/battle`コマンドで凸管理を開始する．(`/battle`コマンドは最初だけしか用いない，途中で使うと予約状況などが初期化されるので注意!!)

```
/battle
```

クランバトル中は基本的には`/reserve`，`/cancel`，`/totsu`，`/fin`，`/la`の5つのコマンドを使う．ダメージは万単位で入力する．予定ダメージを入力するときはちょっと下振れくらいがちょうど良い気がする．

 - 凸予約

```
/reserve [ボス番号] [予定ダメージ]
```

- 凸予約(持ち越しを使用する場合)

通常の凸予約時に使うものの最後に`mochi`をつければ良い．
凸の順番が優先されるようになり，予定残HPが0の場合にでも割り込めるようになる．

```
/reserve [ボス番号] [予定ダメージ] mochi
```

- 凸予約のキャンセル

```
/cancel [ボス番号]
```

- 凸前宣言

```
/totsu
```

- 凸完了報告(LAでない場合)

```
/fin [与えたダメージ]
```

- 凸完了報告(LAの場合)

持ち越しでLAを行った場合には持ち越し時間を入力しない．

```
/la [持ち越し時間]
```

## 残凸管理，タスキル管理

残凸数と持ち越しの管理は`/fin`と`/la`コマンドによって出来るようになっている，
これらのコマンドを使用するたびに残凸把握板のメッセージが変化して，各々の残りの凸数や持ち越しの有無などが把握できる．

またタスキル状況と自分の切ったPTの状況は，それぞれタスキル確認用のチャンネルと残凸把握板にあるメッセージのリアクションを押すことで共有することが可能．
特に残凸管理は魔法物理のどちらを切ってるかを把握できるようになっていて，進行にも関わるので5秒で終わるから忘れずに押してくれ!!


# ちょっと細かい話

## コマンドの接頭辞と省略

コマンドの接頭辞としてスラッシュ[`/`]を使って説明しているがピリオド[`.`]も使える．例えば`/battle`は`.battle`と打っても良い．自分のスマホのIME的にピリオドの方が打ちやすいから地味機能を作った．

また`reserve`コマンドを省略した`rsv`も用意している．どちらも機能は変わらないのでスマホなどで打つのがめんどくさければ`.rsv`とすればちょっと楽．

## 凸予約者がこない場合

凸予約を他の人を消去することは出来ないが，凸予約を無視して凸する事は`/totsu`コマンドを使用すれば可能．悪用厳禁．

- 現在のボスに凸する

```
/totsu [予定ダメージ]
```
- 現在のボスに持ち越しで凸する

```
/totsu [予定ダメージ] mochi
```


## 凸管理を途中から始める

`/battle`コマンドを使用すると最初から凸管理が始まるが，誰かが誤って`/battle`コマンドを打った場合など，途中から凸管理を始めたい場合には`/battle`コマンドに周回数とボス番号のオプションをつければ可能

- 凸管理を途中から始める

```
/battle [周回数] [ボス番号]
```

## ボスの体力調整がしたい

凸管理を途中から始めた場合や`/fin`の入力をミスった場合などで，ボスの体力の調整をしたい時には`/adjust`コマンドを使用する．普通に`/fin`コマンドで体力調整をすると，残凸数が減るので注意!!

```
/adjust [現在のボスのHP]
```

# おまけ機能

## アン

可愛い，天使．

```
/ann
```

## 凸ルート探し

別途共有のspreadsheetに手持ちと各ボスの編成を入力しておけば可能な凸ルートを表示してくれる．めっちゃ出力が多くなるので手持ちが充実してる人は使いづらい．おりゃん人は使いやすいかも．出力が邪魔なのでbotテスト用のチャンネルで動かしてください．

```
/route
```

## テロ

テロ．深夜の凸待ち中に絶対打つなよ!絶対だぞ!

```
/terror
```
